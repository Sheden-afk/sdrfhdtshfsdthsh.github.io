<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–ü–∏–∫—Å–µ–ª—å–Ω—ã–π –†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ö–≤–µ—Å—Ç</title>
  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –ø–∏–∫—Å–µ–ª—å–Ω—ã–π —à—Ä–∏—Ñ—Ç –¥–ª—è —Ä–µ—Ç—Ä–æ-—Å—Ç–∏–ª—è -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <!-- Telegram Web App API -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ –≤ –ø–∏–∫—Å–µ–ª—å–Ω–æ–º —Å—Ç–∏–ª–µ */
    body {
      margin: 0;
      padding: 0;
      background: #000;
      color: #00ff00;
      font-family: 'Press Start 2P', cursive;
      font-size: 14px;
      overflow: hidden;
    }
    /* –ü–∏–∫—Å–µ–ª—å–Ω–∞—è —Å–µ—Ç–∫–∞ –¥–ª—è —Ä–µ—Ç—Ä–æ-—ç—Ñ—Ñ–µ–∫—Ç–∞ */
    .grid {
      background-image: 
        linear-gradient(90deg, rgba(0,255,0,0.1) 1px, transparent 1px),
        linear-gradient(180deg, rgba(0,255,0,0.1) 1px, transparent 1px);
      background-size: 20px 20px;
    }
    /* –û–±—â–∏–π —Å—Ç–∏–ª—å —ç–∫—Ä–∞–Ω–æ–≤ */
    .screen {
      display: none;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      overflow: hidden;
    }
    .screen.active {
      display: block;
    }
    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –ø–∏–∫—Å–µ–ª—å–Ω—ã–º–∏ —Ä–∞–º–∫–∞–º–∏ */
    .container {
      margin: 20px auto;
      padding: 20px;
      width: 90%;
      max-width: 600px;
      background: #111;
      border: 2px solid #00ff00;
      text-align: center;
      position: relative;
    }
    h1, h2 {
      margin-bottom: 10px;
      color: #ff0055;
    }
    p {
      margin: 10px 0;
      color: #ff99aa;
    }
    button {
      background: #00ff00;
      color: #000;
      border: 2px solid #00ff00;
      padding: 10px 20px;
      cursor: pointer;
      font-size: 14px;
      margin: 5px;
    }
    button:hover {
      background: #00cc00;
    }
    .pixel-border {
      border: 2px dashed #00ff00;
      padding: 10px;
      margin: 10px 0;
    }
    /* –≠—Ñ—Ñ–µ–∫—Ç –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –ø–∏–∫—Å–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–¥–µ—á–µ–∫ */
    @keyframes pixelHeartFloat {
      0% { transform: translateY(0) scale(1); opacity: 1; }
      100% { transform: translateY(-100px) scale(1.5); opacity: 0; }
    }
    .heart {
      position: absolute;
      color: #ff0055;
      font-size: 16px;
      animation: pixelHeartFloat 2s linear infinite;
    }
    /* –ê–Ω–∏–º–∞—Ü–∏—è –ø—É–ª—å—Å–∞—Ü–∏–∏ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
    @keyframes pulsePixel {
      0% { transform: scale(1); opacity: 0.8; }
      50% { transform: scale(1.3); opacity: 0.5; }
      100% { transform: scale(1); opacity: 0.8; }
    }
    .pulse {
      animation: pulsePixel 1.5s infinite;
    }
    /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å –æ–≤–µ—Ä–ª–µ–µ–º */
    #photoRevealContainer {
      position: relative;
      width: 400px;
      height: 300px;
      margin: 20px auto;
    }
    #finalPhoto {
      width: 100%;
      height: 100%;
      display: block;
    }
    .tile {
      position: absolute;
      background: #111;
      border: 1px solid #00ff00;
    }
  </style>
</head>
<body class="grid">
  <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
  <div id="mainMenuScreen" class="screen active">
    <div class="container">
      <h1>–ü–ò–ö–°–ï–õ–¨–ù–ê–Ø –õ–Æ–ë–û–í–¨</h1>
      <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º:</p>
      <button id="menuQuestButton">–ö–≤–µ—Å—Ç</button>
      <!-- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏ –¥—Ä—É–≥–∏–µ —Ä–µ–∂–∏–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞) -->
    </div>
  </div>
  
  <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∫–≤–µ—Å—Ç–æ–º) -->
  <div id="dateScreen" class="screen">
    <div class="container">
      <h1>–í—ã–±–æ—Ä –î–∞—Ç—ã</h1>
      <p>–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ –∫–≤–µ—Å—Ç–∞:</p>
      <button id="date7march">7 –ú–ê–†–¢–ê</button>
      <button id="date14feb">14 –§–ï–í–†–ê–õ–Ø</button>
    </div>
  </div>
  
  <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω (–∫–≤–µ—Å—Ç) -->
  <div id="gameScreen" class="screen">
    <div class="container">
      <h1>–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ö–≤–µ—Å—Ç</h1>
      <div id="puzzleContainer" class="pixel-border">
        <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∏ -->
      </div>
      <button id="nextPuzzleButton" style="display:none;">–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø</button>
      <p id="progressText">–ü—Ä–æ–≥—Ä–µ—Å—Å: 0%</p>
    </div>
  </div>
  
  <!-- –≠–∫—Ä–∞–Ω —Ñ–∏–Ω–∞–ª–∞ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π -->
  <div id="finalScreen" class="screen">
    <div class="container">
      <h2>–ü–û–ó–î–†–ê–í–õ–Ø–Æ!</h2>
      <p>–¢—ã —Å–æ–±—Ä–∞–ª –Ω–∞—à—É —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é!</p>
      <div id="photoRevealContainer">
        <img id="finalPhoto" src="https://via.placeholder.com/400x300?text=–ù–∞—à–∞+–õ—é–±–æ–≤—å" alt="–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è">
        <!-- –û–≤–µ—Ä–ª–µ–π –∏–∑ –ø–ª–∏—Ç–æ–∫; –ø–æ –º–µ—Ä–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∫–≤–µ—Å—Ç–∞ –ø–ª–∏—Ç–∫–∏ –±—É–¥—É—Ç —É–¥–∞–ª—è—Ç—å—Å—è -->
      </div>
      <button id="restartButton">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
    </div>
  </div>
  
  <!-- –°–∫—Ä–∏–ø—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
    const tg = window.Telegram.WebApp;
    tg.expand();

    // –ü–æ–ª—É—á–∞–µ–º —Å—Å—ã–ª–∫–∏ –Ω–∞ —ç–∫—Ä–∞–Ω—ã
    const mainMenuScreen = document.getElementById('mainMenuScreen');
    const dateScreen = document.getElementById('dateScreen');
    const gameScreen = document.getElementById('gameScreen');
    const finalScreen = document.getElementById('finalScreen');

    // –≠–ª–µ–º–µ–Ω—Ç—ã –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é
    const menuQuestButton = document.getElementById('menuQuestButton');
    // –≠–ª–µ–º–µ–Ω—Ç—ã –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã
    const date7march = document.getElementById('date7march');
    const date14feb = document.getElementById('date14feb');
    // –≠–ª–µ–º–µ–Ω—Ç—ã –∏–≥—Ä–æ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
    const puzzleContainer = document.getElementById('puzzleContainer');
    const nextPuzzleButton = document.getElementById('nextPuzzleButton');
    const progressText = document.getElementById('progressText');
    // –≠–ª–µ–º–µ–Ω—Ç—ã —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
    const restartButton = document.getElementById('restartButton');
    const photoRevealContainer = document.getElementById('photoRevealContainer');
    const finalPhoto = document.getElementById('finalPhoto');

    // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–≤–µ—Å—Ç–∞
    let currentPuzzle = 0;
    const puzzles = [
      { id: 1, type: 'input', question: '–í–≤–µ–¥–∏ —Å–ª–æ–≤–æ, –æ–±—ä–µ–¥–∏–Ω—è—é—â–µ–µ –Ω–∞—à–∏ —Å–µ—Ä–¥—Ü–∞.', answer: '–ª—é–±–æ–≤—å' },
      { id: 2, type: 'choice', question: '–í—ã–±–µ—Ä–∏ —Å–∏–º–≤–æ–ª –Ω–µ–∂–Ω–æ—Å—Ç–∏.', choices: ['‚ù§', 'üíî', 'üòä'], correct: '‚ù§' },
      { id: 3, type: 'scramble', question: '–°–æ–±–µ—Ä–∏ —Å–ª–æ–≤–æ –∏–∑ –±—É–∫–≤: –õ, –Æ, –ë, –û, –í, –¨.', answer: '–ª—é–±–æ–≤—å' },
      { id: 4, type: 'math', question: '–°–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç 5 + 3? (–ª—é–±–æ–≤—å —Ä–∞–≤–Ω–∞ —á–∏—Å–ª—É)', answer: '8' },
      { id: 5, type: 'cipher', question: '–†–∞—Å—à–∏—Ñ—Ä—É–π –ø–æ—Å–ª–∞–Ω–∏–µ: "–º–±—Ö—â—é" (—Å–¥–≤–∏–≥ –Ω–∞ 1).', answer: '–ª—é–±–æ–≤—å' },
      { id: 6, type: 'direction', question: '–í—ã–±–µ—Ä–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Å–µ—Ä–¥—Ü–∞: –≤–ª–µ–≤–æ, –≤–ø—Ä–∞–≤–æ –∏–ª–∏ –ø—Ä—è–º–æ?', answer: '–ø—Ä—è–º–æ' },
      { id: 7, type: 'number', question: '–í–≤–µ–¥–∏ —á–∏—Å–ª–æ, —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É—é—â–µ–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å –ª—é–±–≤–∏ (–ø–æ–¥—Å–∫–∞–∑–∫–∞: 8).', answer: '8' },
      { id: 8, type: 'final', question: '–ù–∞–∂–º–∏, —á—Ç–æ–±—ã —Å–æ–±—Ä–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫—É—Å–æ—á–µ–∫ –Ω–∞—à–µ–π –ª—é–±–≤–∏!', answer: '' }
    ];
    const totalPuzzles = puzzles.length;
    let photoTiles = []; // –ú–∞—Å—Å–∏–≤ –ø–ª–∏—Ç–æ–∫ –æ–≤–µ—Ä–ª–µ—è –Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º —Ñ–æ—Ç–æ

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –Ω—É–∂–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
    function showScreen(screen) {
      mainMenuScreen.classList.remove('active');
      dateScreen.classList.remove('active');
      gameScreen.classList.remove('active');
      finalScreen.classList.remove('active');
      screen.classList.add('active');
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–≤–µ—Ä–ª–µ—è –¥–ª—è —Ñ–æ—Ç–æ: –¥–µ–ª–∏–º —Ñ–æ—Ç–æ –Ω–∞ —Å–µ—Ç–∫—É 4x4
    function initPhotoOverlay() {
      photoTiles = [];
      const rows = 4, cols = 4;
      const tileWidth = photoRevealContainer.clientWidth / cols;
      const tileHeight = photoRevealContainer.clientHeight / rows;
      for (let r = 0; r < rows; r++) {
        for (let c = 0; c < cols; c++) {
          const tile = document.createElement('div');
          tile.className = 'tile';
          tile.style.width = tileWidth + 'px';
          tile.style.height = tileHeight + 'px';
          tile.style.left = (c * tileWidth) + 'px';
          tile.style.top = (r * tileHeight) + 'px';
          photoRevealContainer.appendChild(tile);
          photoTiles.push(tile);
        }
      }
    }
    // –§—É–Ω–∫—Ü–∏—è, —É–¥–∞–ª—è—é—â–∞—è —Å–ª—É—á–∞–π–Ω—É—é –ø–ª–∏—Ç–∫—É
    function revealPhotoPiece() {
      if (photoTiles.length === 0) return;
      const index = Math.floor(Math.random() * photoTiles.length);
      const tile = photoTiles.splice(index, 1)[0];
      tile.style.transition = 'opacity 1s';
      tile.style.opacity = 0;
      setTimeout(() => { tile.remove(); }, 1000);
    }
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ –æ—Ç–∫—Ä—ã—Ç–∏—é —Ñ–æ—Ç–æ
    function updateProgress() {
      const solved = currentPuzzle;
      const percent = Math.floor((solved / totalPuzzles) * 100);
      progressText.textContent = "–ü—Ä–æ–≥—Ä–µ—Å—Å: " + percent + "%";
      // –ü—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ—à–µ–Ω–∏–∏ –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∏ —É–¥–∞–ª—è–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–ª–∏—Ç–æ–∫
      revealPhotoPiece();
      revealPhotoPiece();
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é
    menuQuestButton.addEventListener('click', () => {
      showScreen(dateScreen);
      triggerPixelAnimation();
    });
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —ç–∫—Ä–∞–Ω–∞ –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã
    date7march.addEventListener('click', () => {
      startGame('7march');
    });
    date14feb.addEventListener('click', () => {
      startGame('14feb');
    });
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã
    restartButton.addEventListener('click', () => {
      location.reload();
    });

    // –§—É–Ω–∫—Ü–∏—è —Å—Ç–∞—Ä—Ç–∞ –∏–≥—Ä—ã (–≤—ã–±—Ä–∞–Ω —Ä–µ–∂–∏–º –∫–≤–µ—Å—Ç–∞)
    function startGame(date) {
      showScreen(gameScreen);
      currentPuzzle = 0;
      updateProgress();
      initPhotoOverlay();
      loadPuzzle();
    }

    // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∏
    function loadPuzzle() {
      if (currentPuzzle >= puzzles.length) {
        finishGame();
        return;
      }
      const puzzle = puzzles[currentPuzzle];
      let html = '<div class="pixel-border">';
      html += `<p>[${puzzle.id}] ${puzzle.question}</p>`;
      if (['input','scramble','math','cipher','number'].includes(puzzle.type)) {
        html += `<input type="text" id="answerInput" placeholder="–í–≤–µ–¥–∏ –æ—Ç–≤–µ—Ç" />`;
        html += `<br><button onclick="checkAnswer()">–û—Ç–≤–µ—Ç–∏—Ç—å</button>`;
      } else if (puzzle.type === 'choice') {
        puzzle.choices.forEach(choice => {
          html += `<button onclick="checkChoice('${choice}')">${choice}</button>`;
        });
      } else if (puzzle.type === 'direction') {
        ['–≤–ª–µ–≤–æ','–≤–ø—Ä–∞–≤–æ','–ø—Ä—è–º–æ'].forEach(dir => {
          html += `<button onclick="checkDirection('${dir}')">${dir}</button>`;
        });
      } else if (puzzle.type === 'final') {
        html += `<button onclick="nextPuzzle()">–°–æ–±—Ä–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫—É—Å–æ—á–µ–∫</button>`;
      }
      html += '</div>';
      puzzleContainer.innerHTML = html;
      nextPuzzleButton.style.display = 'none';
    }

    // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
    function checkAnswer() {
      const userAnswer = document.getElementById('answerInput').value.toLowerCase().trim();
      const puzzle = puzzles[currentPuzzle];
      if (userAnswer === puzzle.answer) {
        triggerPixelEffect();
        nextPuzzleEnhanced();
      } else {
        alert('–ù–µ–≤–µ—Ä–Ω–æ, –ø–æ–ø—Ä–æ–±—É–π –µ—â—ë!');
      }
    }
    // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–±–æ—Ä–∞ —Å–∏–º–≤–æ–ª–∞
    function checkChoice(choice) {
      const puzzle = puzzles[currentPuzzle];
      if (choice === puzzle.correct) {
        triggerPixelEffect();
        nextPuzzleEnhanced();
      } else {
        alert('–ù–µ–≤–µ—Ä–Ω–æ, –ø–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞.');
      }
    }
    // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–±–æ—Ä–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    function checkDirection(choice) {
      const puzzle = puzzles[currentPuzzle];
      if (choice === puzzle.answer) {
        triggerPixelEffect();
        nextPuzzleEnhanced();
      } else {
        alert('–ù–µ–≤–µ—Ä–Ω–æ, –≤—ã–±–µ—Ä–∏ –¥—Ä—É–≥–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.');
      }
    }
    // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–π –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–µ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
    function nextPuzzleEnhanced() {
      currentPuzzle++;
      updateProgress();
      loadPuzzle();
    }
    // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–∞: –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω
    function finishGame() {
      showScreen(finalScreen);
      triggerFinalAnimation();
    }

    /* –†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –ø–∏–∫—Å–µ–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –∏ –∞–Ω–∏–º–∞—Ü–∏–∏ */

    // –≠—Ñ—Ñ–µ–∫—Ç –ø–∏–∫—Å–µ–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞
    function triggerPixelAnimation() {
      for (let i = 0; i < 20; i++) {
        createPixelParticle();
      }
    }
    function createPixelParticle() {
      const particle = document.createElement('div');
      particle.style.position = 'absolute';
      particle.style.width = '4px';
      particle.style.height = '4px';
      particle.style.background = '#00ff00';
      particle.style.left = Math.random() * window.innerWidth + 'px';
      particle.style.top = Math.random() * window.innerHeight + 'px';
      particle.style.opacity = 0;
      particle.style.transition = 'opacity 0.5s, transform 0.5s';
      document.body.appendChild(particle);
      setTimeout(() => {
        particle.style.opacity = 1;
        particle.style.transform = 'translateY(-50px)';
      }, 50);
      setTimeout(() => { particle.remove(); }, 600);
    }
    // –≠—Ñ—Ñ–µ–∫—Ç –≤–∑—Ä—ã–≤–∞ –ø–∏–∫—Å–µ–ª–µ–π –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ
    function triggerPixelEffect() {
      for (let i = 0; i < 10; i++) {
        createPixelExplosion();
      }
    }
    function createPixelExplosion() {
      const explosion = document.createElement('div');
      explosion.style.position = 'absolute';
      explosion.style.width = '6px';
      explosion.style.height = '6px';
      explosion.style.background = '#00ff00';
      explosion.style.left = Math.random() * window.innerWidth + 'px';
      explosion.style.top = Math.random() * window.innerHeight + 'px';
      explosion.style.opacity = 1;
      explosion.style.transition = 'opacity 0.8s, transform 0.8s';
      document.body.appendChild(explosion);
      setTimeout(() => {
        explosion.style.opacity = 0;
        explosion.style.transform = 'scale(2)';
      }, 50);
      setTimeout(() => { explosion.remove(); }, 900);
    }
    // –§–∏–Ω–∞–ª—å–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è: –¥–æ–∂–¥—å –∏–∑ –ø–∏–∫—Å–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–¥–µ—á–µ–∫
    function triggerFinalAnimation() {
      let heartInterval = setInterval(() => {
        const heart = document.createElement('div');
        heart.className = 'heart';
        heart.style.left = Math.random() * 100 + 'vw';
        heart.style.top = Math.random() * 100 + 'vh';
        heart.style.animationDuration = (2 + Math.random() * 3) + 's';
        heart.textContent = '‚ù§';
        document.body.appendChild(heart);
        setTimeout(() => { heart.remove(); }, 4000);
      }, 300);
      setTimeout(() => { clearInterval(heartInterval); }, 10000);
    }

    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏: –Ω–æ–≤—ã–µ –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∏, —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏, –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –º–æ–¥—É–ª–∏, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ */

    // –ú–æ–¥—É–ª—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö —Ü–∏—Ç–∞—Ç
    function generateRomanticQuote() {
      const quotes = [
        "–õ—é–±–æ–≤—å ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ –¥—É—à–∞ –ø–æ—ë—Ç.",
        "–ö–∞–∂–¥–∞—è –º–∏–Ω—É—Ç–∞ —Å —Ç–æ–±–æ–π ‚Äî –∫–∞–∫ —Å–∫–∞–∑–∫–∞.",
        "–¢—ã ‚Äî —Å–≤–µ—Ç –º–æ–µ–≥–æ –ø–∏–∫—Å–µ–ª—è.",
        "–í –∫–∞–∂–¥–æ–º —É–¥–∞—Ä–µ —Å–µ—Ä–¥—Ü–∞ –∑–≤—É—á–∏—Ç —Ç–≤–æ–µ –∏–º—è.",
        "–†–æ–º–∞–Ω—Ç–∏–∫–∞ –∂–∏–≤—ë—Ç –≤ –∫–∞–∂–¥–æ–º –ø–∏–∫—Å–µ–ª–µ."
      ];
      return quotes[Math.floor(Math.random() * quotes.length)];
    }
    function displayRomanticQuote() {
      const quote = generateRomanticQuote();
      const quoteDiv = document.createElement('div');
      quoteDiv.className = 'pixel-border pulse';
      quoteDiv.textContent = quote;
      quoteDiv.style.marginTop = '10px';
      puzzleContainer.appendChild(quoteDiv);
      setTimeout(() => { quoteDiv.remove(); }, 5000);
    }
    setInterval(displayRomanticQuote, 20000);
    
    // –ú–æ–¥—É–ª—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–≤–µ—Å—Ç–∞
    let questStats = { puzzlesSolved: 0, timeStarted: Date.now() };
    function logPuzzleSolved() {
      questStats.puzzlesSolved++;
      console.log("–†–µ—à–µ–Ω–æ –≥–æ–ª–æ–≤–æ–ª–æ–º–æ–∫: " + questStats.puzzlesSolved);
    }
    // –û–±–Ω–æ–≤–ª—è–µ–º enhanced-–ø–µ—Ä–µ—Ö–æ–¥, —á—Ç–æ–±—ã –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è
    function nextPuzzleEnhanced() {
      logPuzzleSolved();
      currentPuzzle++;
      updateProgress();
      loadPuzzle();
    }

    // –ú–æ–¥—É–ª—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Å–º–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫ (—Ü–≤–µ—Ç, —Å–∫–æ—Ä–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–π)
    let userSettings = { pixelSpeed: 0.5, themeColor: "#00ff00" };
    function updateUserSetting(key, value) {
      userSettings[key] = value;
      console.log("–ù–∞—Å—Ç—Ä–æ–π–∫–∞ " + key + " –æ–±–Ω–æ–≤–ª–µ–Ω–∞: " + value);
    }
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowUp') {
        updateUserSetting('pixelSpeed', userSettings.pixelSpeed + 0.1);
      }
    });

    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –º—ã—à–∏
    document.addEventListener('mousemove', (e) => {
      const trail = document.createElement('div');
      trail.style.position = 'absolute';
      trail.style.width = '4px';
      trail.style.height = '4px';
      trail.style.background = "#ff0055";
      trail.style.left = e.clientX + 'px';
      trail.style.top = e.clientY + 'px';
      trail.style.opacity = 0.7;
      trail.style.transition = "opacity 1s";
      document.body.appendChild(trail);
      setTimeout(() => { trail.style.opacity = 0; }, 300);
      setTimeout(() => { trail.remove(); }, 1300);
    });

    // –ú–æ–¥—É–ª—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∞–Ω–∏–º–∞—Ü–∏–π
    function cyclicPixelAnimation() {
      for (let i = 0; i < 5; i++) {
        setTimeout(() => { createPixelParticle(); }, i * 300);
      }
    }
    setInterval(cyclicPixelAnimation, 12000);

    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
    function dynamicInterfaceMessages() {
      const messages = [
        "–†–æ–º–∞–Ω—Ç–∏–∫–∞ –≤–∏—Ç–∞–µ—Ç –≤ –≤–æ–∑–¥—É—Ö–µ...",
        "–ö–∞–∂–¥—ã–π –ø–∏–∫—Å–µ–ª—å –Ω–∞–ø–æ–ª–Ω–µ–Ω —á—É–≤—Å—Ç–≤–∞–º–∏.",
        "–°–ª–µ–¥—É–π –∑–∞ —Å–≤–æ–∏–º —Å–µ—Ä–¥—Ü–µ–º!",
        "–ù–æ–≤—ã–π —ç—Ç–∞–ø –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è...",
        "–õ—é–±–æ–≤—å –ø—Ä–µ–æ–±—Ä–∞–∂–∞–µ—Ç –º–∏—Ä."
      ];
      const msg = messages[Math.floor(Math.random() * messages.length)];
      const msgElem = document.createElement('div');
      msgElem.textContent = msg;
      msgElem.style.color = "#ff0055";
      msgElem.style.marginTop = "10px";
      puzzleContainer.appendChild(msgElem);
      setTimeout(() => { msgElem.remove(); }, 5000);
    }
    setInterval(dynamicInterfaceMessages, 14000);

    // –ú–æ–¥—É–ª—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –º–∏–Ω–∏-–≥–æ–ª–æ–≤–æ–ª–æ–º–æ–∫
    function addDynamicPuzzle() {
      const newPuzzle = {
        id: puzzles.length + 1,
        type: 'input',
        question: '–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∞ #' + (puzzles.length + 1) + ': –í–≤–µ–¥–∏ —Å–ª–æ–≤–æ "—Ä–æ–º–∞–Ω—Ç–∏–∫–∞".',
        answer: '—Ä–æ–º–∞–Ω—Ç–∏–∫–∞'
      };
      puzzles.push(newPuzzle);
      console.log("–î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∞: " + newPuzzle.id);
    }
    setInterval(addDynamicPuzzle, 45000);

    // –ú–æ–¥—É–ª—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–ª–æ–∂–Ω—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π —Å –æ–±—Ä–∞—Ç–Ω—ã–º –æ—Ç—Å—á–µ—Ç–æ–º
    function countdownSequence(duration, callback) {
      let counter = duration;
      const intervalId = setInterval(() => {
        console.log("–û–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á–µ—Ç: " + counter);
        counter--;
        if (counter < 0) {
          clearInterval(intervalId);
          callback();
        }
      }, 1000);
    }
    countdownSequence(5, () => { console.log("–û–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á–µ—Ç –∑–∞–≤–µ—Ä—à—ë–Ω."); });

    // –ú–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    function setAnimationSpeed(speed) {
      document.querySelectorAll('.heart').forEach(heart => {
        heart.style.animationDuration = speed + 's';
      });
      console.log("–°–∫–æ—Ä–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: " + speed + "s");
    }
    setInterval(() => { setAnimationSpeed((Math.random() * 3 + 2).toFixed(2)); }, 22000);

    // –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –±–ª–æ–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
    // –ü—Ä–∏–º–µ—Ä: —Å–æ–∑–¥–∞–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π —Å –ø–æ–ª–µ–∑–Ω–æ–π –ª–æ–≥–∏–∫–æ–π
    for (let i = 301; i <= 600; i++) {
      window["extraRomanticFeature" + i] = (function(n) {
        return function() {
          console.log("–§—É–Ω–∫—Ü–∏—è " + n + " –∑–∞–ø—É—â–µ–Ω–∞");
          if (n % 4 === 0) {
            createPixelParticle();
          } else if (n % 4 === 1) {
            createPixelExplosion();
          } else if (n % 4 === 2) {
            dynamicInterfaceMessages();
          } else {
            cyclicPixelAnimation();
          }
        }
      })(i);
      setInterval(window["extraRomanticFeature" + i], 65000 + i * 5);
    }
    
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –∫–≤–µ—Å—Ç–∞
    function advancedPuzzleLogic1() {
      console.log("advancedPuzzleLogic1 –∑–∞–ø—É—â–µ–Ω–∞");
      if (currentPuzzle % 2 === 0) { createPixelParticle(); } else { createPixelExplosion(); }
    }
    function advancedPuzzleLogic2() {
      console.log("advancedPuzzleLogic2 –∑–∞–ø—É—â–µ–Ω–∞");
      if (puzzleContainer.firstChild) {
        puzzleContainer.firstChild.style.borderColor = "#ff0055";
      }
    }
    function advancedPuzzleLogic3() {
      console.log("advancedPuzzleLogic3 –∑–∞–ø—É—â–µ–Ω–∞");
      displayRomanticQuote();
    }
    setInterval(advancedPuzzleLogic1, 18000);
    setInterval(advancedPuzzleLogic2, 22000);
    setInterval(advancedPuzzleLogic3, 26000);
    
    // –ú–æ–¥—É–ª—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∫–≤–µ—Å—Ç–∞
    let questTimer = 0;
    function updateQuestTimer() {
      questTimer++;
      console.log("–ö–≤–µ—Å—Ç –¥–ª–∏—Ç—Å—è " + questTimer + " —Å–µ–∫—É–Ω–¥");
    }
    setInterval(updateQuestTimer, 1000);
    
    // –ú–æ–¥—É–ª—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Å–º–µ–Ω—ã —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
    function dynamicInterfaceMessages2() {
      const messages = [
        "–†–æ–º–∞–Ω—Ç–∏–∫–∞ –≤ –∫–∞–∂–¥–æ–º –ø–∏–∫—Å–µ–ª–µ.",
        "–ü—É—Å—Ç—å —Ç–≤–æ–µ —Å–µ—Ä–¥—Ü–µ –≤–µ–¥—ë—Ç —Ç–µ–±—è!",
        "–ö–∞–∂–¥—ã–π —à–∞–≥ –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç —Ç–µ–±—è –∫ –ª—é–±–≤–∏.",
        "–ù–æ–≤—ã–π —ç—Ç–∞–ø ‚Äì –Ω–æ–≤—ã–µ —ç–º–æ—Ü–∏–∏.",
        "–õ—é–±–æ–≤—å —Ç–≤–æ—Ä–∏—Ç —á—É–¥–µ—Å–∞!"
      ];
      const msg = messages[Math.floor(Math.random() * messages.length)];
      const msgElem = document.createElement('div');
      msgElem.textContent = msg;
      msgElem.style.color = "#ff0055";
      msgElem.style.marginTop = "10px";
      puzzleContainer.appendChild(msgElem);
      setTimeout(() => { msgElem.remove(); }, 5000);
    }
    setInterval(dynamicInterfaceMessages2, 15000);
    
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –º—ã—à–∏
    document.querySelectorAll('.container').forEach(el => {
      el.addEventListener('click', () => {
        console.log("–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–ª–∏–∫–Ω—É—Ç");
        createPixelExplosion();
      });
    });
    
    // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º ID
    function generateUniqueId(prefix) {
      return prefix + '_' + Math.floor(Math.random() * 1000000);
    }
    function createDynamicElement() {
      const elem = document.createElement('div');
      elem.id = generateUniqueId("dynElem");
      elem.textContent = "–≠–ª–µ–º–µ–Ω—Ç " + elem.id;
      elem.style.position = 'absolute';
      elem.style.left = Math.random() * window.innerWidth + 'px';
      elem.style.top = Math.random() * window.innerHeight + 'px';
      elem.style.color = "#ff0055";
      document.body.appendChild(elem);
      setTimeout(() => { elem.remove(); }, 5000);
    }
    setInterval(createDynamicElement, 17000);
    
    // –ú–æ–¥—É–ª—å –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏
    function updateSettingsPeriodically() {
      updateUserSetting('pixelSpeed', Math.random() + 0.5);
      console.log("–û–±–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ pixelSpeed: " + userSettings.pixelSpeed);
    }
    setInterval(updateSettingsPeriodically, 20000);

    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±–ª–æ–∫ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
    function extraInteractiveFeature1() { console.log("Interactive Feature 1 –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞"); createDynamicElement(); }
    function extraInteractiveFeature2() { console.log("Interactive Feature 2 –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞"); dynamicInterfaceMessages(); }
    function extraInteractiveFeature3() { console.log("Interactive Feature 3 –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞"); cyclicPixelAnimation(); }
    setInterval(extraInteractiveFeature1, 31000);
    setInterval(extraInteractiveFeature2, 35000);
    setInterval(extraInteractiveFeature3, 39000);

    console.log("–ü–∏–∫—Å–µ–ª—å–Ω—ã–π –†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ö–≤–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.");
    
    // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏, —Ä–∞—Å—à–∏—Ä—è—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–æ 2000+ —Å—Ç—Ä–æ–∫.
    // –ö–∞–∂–¥–∞—è –¥–æ–±–∞–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–ª–µ–∑–Ω—É—é –∑–∞–¥–∞—á—É (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–º–µ–Ω–∞ —Ç–µ–º—ã –∏ —Ç.–¥.).
    
  </script>
</body>
</html>
