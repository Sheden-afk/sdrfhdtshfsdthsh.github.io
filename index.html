<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–ü–∏–∫—Å–µ–ª—å–Ω—ã–π –†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ö–≤–µ—Å—Ç ‚Äî –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è</title>
  <!-- –ü–∏–∫—Å–µ–ª—å–Ω—ã–π —à—Ä–∏—Ñ—Ç –¥–ª—è —Ä–µ—Ç—Ä–æ-—Å—Ç–∏–ª—è -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <!-- Telegram Web App API -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    /* –û–±—â–∏–π –±–∞–∑–æ–≤—ã–π —Å—Ç–∏–ª—å –≤ –ø–∏–∫—Å–µ–ª—å–Ω–æ–º —Å—Ç–∏–ª–µ */
    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #000, #330000);
      color: #00ff00;
      font-family: 'Press Start 2P', cursive;
      font-size: 14px;
      overflow: hidden;
    }
    /* –ü–∏–∫—Å–µ–ª—å–Ω–∞—è —Å–µ—Ç–∫–∞ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ —Ä–µ—Ç—Ä–æ */
    .grid {
      background-image: 
        linear-gradient(90deg, rgba(0,255,0,0.1) 1px, transparent 1px),
        linear-gradient(180deg, rgba(0,255,0,0.1) 1px, transparent 1px);
      background-size: 20px 20px;
    }
    /* –°—Ç–∏–ª–∏ —ç–∫—Ä–∞–Ω–æ–≤ */
    .screen {
      display: none;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      overflow: hidden;
    }
    .screen.active {
      display: block;
    }
    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –ø–∏–∫—Å–µ–ª—å–Ω—ã–º–∏ —Ä–∞–º–∫–∞–º–∏ */
    .container {
      margin: 20px auto;
      padding: 20px;
      width: 90%;
      max-width: 600px;
      background: #111;
      border: 2px solid #00ff00;
      text-align: center;
      position: relative;
    }
    h1, h2 {
      margin-bottom: 10px;
      color: #ff0055;
    }
    p {
      margin: 10px 0;
      color: #ff99aa;
    }
    button {
      background: #00ff00;
      color: #000;
      border: 2px solid #00ff00;
      padding: 10px 20px;
      cursor: pointer;
      font-size: 14px;
      margin: 5px;
    }
    button:hover {
      background: #00cc00;
    }
    .pixel-border {
      border: 2px dashed #00ff00;
      padding: 10px;
      margin: 10px 0;
    }
    /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –ø–∏–∫—Å–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–¥–µ—á–µ–∫ */
    @keyframes pixelHeartFloat {
      0% { transform: translateY(0) scale(1); opacity: 1; }
      100% { transform: translateY(-100px) scale(1.5); opacity: 0; }
    }
    .heart {
      position: absolute;
      color: #ff0055;
      font-size: 16px;
      animation: pixelHeartFloat 2s linear infinite;
    }
    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ */
    @keyframes pulsePixel {
      0% { transform: scale(1); opacity: 0.8; }
      50% { transform: scale(1.3); opacity: 0.5; }
      100% { transform: scale(1); opacity: 0.8; }
    }
    .pulse {
      animation: pulsePixel 1.5s infinite;
    }
  </style>
</head>
<body class="grid">
  <!-- –≠–∫—Ä–∞–Ω: –°—Ç–∞—Ä—Ç (–∫–Ω–æ–ø–∫–∞ –ù–ê–ß–ê–¢–¨) -->
  <div id="startScreen" class="screen active">
    <div class="container">
      <h1>–ü–ò–ö–°–ï–õ–¨–ù–ê–Ø –õ–Æ–ë–û–í–¨</h1>
      <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–≤–µ—Å—Ç, –≥–¥–µ –∫–∞–∂–¥—ã–π –ø–∏–∫—Å–µ–ª—å –Ω–∞–ø–æ–ª–Ω–µ–Ω —Ä–æ–º–∞–Ω—Ç–∏–∫–æ–π!</p>
      <button id="startButton">–ù–ê–ß–ê–¢–¨</button>
    </div>
  </div>
  
  <!-- –≠–∫—Ä–∞–Ω: –í—ã–±–æ—Ä –¥–∞—Ç—ã -->
  <div id="dateScreen" class="screen">
    <div class="container">
      <h1>–í—ã–±–æ—Ä –î–∞—Ç—ã</h1>
      <p>–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ –Ω–∞—à–µ–≥–æ –∫–≤–µ—Å—Ç–∞:</p>
      <button id="date7march">7 –ú–ê–†–¢–ê</button>
      <button id="date14feb">14 –§–ï–í–†–ê–õ–Ø</button>
    </div>
  </div>
  
  <!-- –≠–∫—Ä–∞–Ω: –ò–≥—Ä–∞ (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≥–æ–ª–æ–≤–æ–ª–æ–º–æ–∫) -->
  <div id="gameScreen" class="screen">
    <div class="container">
      <h1>–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ö–≤–µ—Å—Ç</h1>
      <div id="puzzleContainer" class="pixel-border">
        <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–æ–¥–≥—Ä—É–∂–∞—Ç—å—Å—è –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∏ -->
      </div>
      <button id="nextPuzzleButton" style="display:none;">–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø</button>
    </div>
  </div>
  
  <!-- –≠–∫—Ä–∞–Ω: –§–∏–Ω–∞–ª (—Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π –∏ –∞–Ω–∏–º–∞—Ü–∏–µ–π —Å–µ—Ä–¥–µ—á–µ–∫) -->
  <div id="finalScreen" class="screen">
    <div class="container">
      <h2>–ü–û–ó–î–†–ê–í–õ–Ø–Æ!</h2>
      <p>–¢—ã —Å–æ–±—Ä–∞–ª –Ω–∞—à—É —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é!</p>
      <img id="assembledPhoto" src="https://via.placeholder.com/400x300?text=–ù–∞—à–∞+–õ—é–±–æ–≤—å" alt="–°–æ–±—Ä–∞–Ω–Ω–∞—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è" style="width:100%; border:2px solid #00ff00;">
      <button id="restartButton">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
    </div>
  </div>
  
  <!-- –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
    const tg = window.Telegram.WebApp;
    tg.expand();
    
    // –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤ –∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    const startScreen = document.getElementById('startScreen');
    const dateScreen = document.getElementById('dateScreen');
    const gameScreen = document.getElementById('gameScreen');
    const finalScreen = document.getElementById('finalScreen');
    const startButton = document.getElementById('startButton');
    const date7march = document.getElementById('date7march');
    const date14feb = document.getElementById('date14feb');
    const nextPuzzleButton = document.getElementById('nextPuzzleButton');
    const restartButton = document.getElementById('restartButton');
    const puzzleContainer = document.getElementById('puzzleContainer');
    
    // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ª–æ–≥–∏–∫–∏ –∫–≤–µ—Å—Ç–∞
    let currentPuzzle = 0;
    const puzzles = [
      { id: 1, type: 'input', question: '–í–≤–µ–¥–∏ —Å–ª–æ–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –Ω–∞—à–∏ —Å–µ—Ä–¥—Ü–∞.', answer: '–ª—é–±–æ–≤—å' },
      { id: 2, type: 'choice', question: '–í—ã–±–µ—Ä–∏ —Å–∏–º–≤–æ–ª –Ω–µ–∂–Ω–æ—Å—Ç–∏.', choices: ['‚ù§', 'üíî', 'üòä'], correct: '‚ù§' },
      { id: 3, type: 'scramble', question: '–°–æ–±–µ—Ä–∏ —Å–ª–æ–≤–æ –∏–∑ –±—É–∫–≤: –õ, –Æ, –ë, –û, –í, –¨.', answer: '–ª—é–±–æ–≤—å' },
      { id: 4, type: 'math', question: '–°–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç 5 + 3? (–õ—é–±–æ–≤—å —Ä–∞–≤–Ω–∞ —á–∏—Å–ª—É)', answer: '8' },
      { id: 5, type: 'cipher', question: '–†–∞—Å—à–∏—Ñ—Ä—É–π –ø–æ—Å–ª–∞–Ω–∏–µ: "–º–±—Ö—â—é" (—Å–¥–≤–∏–≥ –Ω–∞ 1).', answer: '–ª—é–±–æ–≤—å' },
      { id: 6, type: 'direction', question: '–í—ã–±–µ—Ä–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Å–µ—Ä–¥—Ü–∞: –≤–ª–µ–≤–æ, –≤–ø—Ä–∞–≤–æ –∏–ª–∏ –ø—Ä—è–º–æ?', answer: '–ø—Ä—è–º–æ' },
      { id: 7, type: 'number', question: '–í–≤–µ–¥–∏ —á–∏—Å–ª–æ, —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É—é—â–µ–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å –ª—é–±–≤–∏ (–ø–æ–¥—Å–∫–∞–∑–∫–∞: 8).', answer: '8' },
      { id: 8, type: 'final', question: '–ù–∞–∂–º–∏, —á—Ç–æ–±—ã —Å–æ–±—Ä–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫—É—Å–æ—á–µ–∫ –Ω–∞—à–µ–π –ª—é–±–≤–∏!', answer: '' }
    ];
    
    // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —ç–∫—Ä–∞–Ω–æ–≤
    function showScreen(screen) {
      startScreen.classList.remove('active');
      dateScreen.classList.remove('active');
      gameScreen.classList.remove('active');
      finalScreen.classList.remove('active');
      screen.classList.add('active');
    }
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ —Å—Ç–∞—Ä—Ç/–≤—ã–±–æ—Ä –¥–∞—Ç—ã/–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
    startButton.addEventListener('click', () => {
      showScreen(dateScreen);
      triggerPixelAnimation();
    });
    date7march.addEventListener('click', () => {
      startGame('7march');
    });
    date14feb.addEventListener('click', () => {
      startGame('14feb');
    });
    restartButton.addEventListener('click', () => {
      location.reload();
    });
    
    // –§—É–Ω–∫—Ü–∏—è —Å—Ç–∞—Ä—Ç–∞ –∏–≥—Ä—ã –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –¥–∞—Ç–µ
    function startGame(date) {
      showScreen(gameScreen);
      currentPuzzle = 0;
      loadPuzzle();
    }
    
    // –ó–∞–≥—Ä—É–∑–∫–∞ –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∏
    function loadPuzzle() {
      if (currentPuzzle >= puzzles.length) {
        finishGame();
        return;
      }
      const puzzle = puzzles[currentPuzzle];
      let html = '<div class="pixel-border">';
      html += `<p>[${puzzle.id}] ${puzzle.question}</p>`;
      if (['input','scramble','math','cipher','number'].includes(puzzle.type)) {
        html += `<input type="text" id="answerInput" placeholder="–í–≤–µ–¥–∏ –æ—Ç–≤–µ—Ç" />`;
        html += `<br><button onclick="checkAnswer()">–û—Ç–≤–µ—Ç–∏—Ç—å</button>`;
      } else if (puzzle.type === 'choice') {
        puzzle.choices.forEach(choice => {
          html += `<button onclick="checkChoice('${choice}')">${choice}</button>`;
        });
      } else if (puzzle.type === 'direction') {
        ['–≤–ª–µ–≤–æ','–≤–ø—Ä–∞–≤–æ','–ø—Ä—è–º–æ'].forEach(dir => {
          html += `<button onclick="checkDirection('${dir}')">${dir}</button>`;
        });
      } else if (puzzle.type === 'final') {
        html += `<button onclick="nextPuzzle()">–°–æ–±—Ä–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫—É—Å–æ—á–µ–∫</button>`;
      }
      html += '</div>';
      puzzleContainer.innerHTML = html;
      nextPuzzleButton.style.display = 'none';
    }
    
    // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
    function checkAnswer() {
      const userAnswer = document.getElementById('answerInput').value.toLowerCase().trim();
      const puzzle = puzzles[currentPuzzle];
      if (userAnswer === puzzle.answer) {
        triggerPixelEffect();
        nextPuzzle();
      } else {
        alert('–ù–µ–≤–µ—Ä–Ω–æ, –ø–æ–ø—Ä–æ–±—É–π –µ—â—ë!');
      }
    }
    // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–±–æ—Ä–∞ —Å–∏–º–≤–æ–ª–∞
    function checkChoice(choice) {
      const puzzle = puzzles[currentPuzzle];
      if (choice === puzzle.correct) {
        triggerPixelEffect();
        nextPuzzle();
      } else {
        alert('–ù–µ–≤–µ—Ä–Ω–æ, –ø–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞.');
      }
    }
    // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    function checkDirection(choice) {
      const puzzle = puzzles[currentPuzzle];
      if (choice === puzzle.answer) {
        triggerPixelEffect();
        nextPuzzle();
      } else {
        alert('–ù–µ–≤–µ—Ä–Ω–æ, –≤—ã–±–µ—Ä–∏ –¥—Ä—É–≥–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.');
      }
    }
    // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–π –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–µ
    function nextPuzzle() {
      currentPuzzle++;
      loadPuzzle();
    }
    // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–∞
    function finishGame() {
      showScreen(finalScreen);
      triggerFinalAnimation();
    }
    
    /* –†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –ø–∏–∫—Å–µ–ª—å–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã */
    
    // –≠—Ñ—Ñ–µ–∫—Ç –ø–∏–∫—Å–µ–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞
    function triggerPixelAnimation() {
      for (let i = 0; i < 20; i++) {
        createPixelParticle();
      }
    }
    function createPixelParticle() {
      const particle = document.createElement('div');
      particle.style.position = 'absolute';
      particle.style.width = '4px';
      particle.style.height = '4px';
      particle.style.background = '#00ff00';
      particle.style.left = Math.random() * window.innerWidth + 'px';
      particle.style.top = Math.random() * window.innerHeight + 'px';
      particle.style.opacity = 0;
      particle.style.transition = 'opacity 0.5s, transform 0.5s';
      document.body.appendChild(particle);
      setTimeout(() => {
        particle.style.opacity = 1;
        particle.style.transform = 'translateY(-50px)';
      }, 50);
      setTimeout(() => { particle.remove(); }, 600);
    }
    
    // –≠—Ñ—Ñ–µ–∫—Ç –≤–∑—Ä—ã–≤–∞ –ø–∏–∫—Å–µ–ª–µ–π –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ
    function triggerPixelEffect() {
      for (let i = 0; i < 10; i++) {
        createPixelExplosion();
      }
    }
    function createPixelExplosion() {
      const explosion = document.createElement('div');
      explosion.style.position = 'absolute';
      explosion.style.width = '6px';
      explosion.style.height = '6px';
      explosion.style.background = '#00ff00';
      explosion.style.left = Math.random() * window.innerWidth + 'px';
      explosion.style.top = Math.random() * window.innerHeight + 'px';
      explosion.style.opacity = 1;
      explosion.style.transition = 'opacity 0.8s, transform 0.8s';
      document.body.appendChild(explosion);
      setTimeout(() => {
        explosion.style.opacity = 0;
        explosion.style.transform = 'scale(2)';
      }, 50);
      setTimeout(() => { explosion.remove(); }, 900);
    }
    
    // –§–∏–Ω–∞–ª—å–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è: –¥–æ–∂–¥—å –∏–∑ –ø–∏–∫—Å–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–¥–µ—á–µ–∫
    function triggerFinalAnimation() {
      let heartInterval = setInterval(() => {
        const heart = document.createElement('div');
        heart.className = 'heart';
        heart.style.left = Math.random() * 100 + 'vw';
        heart.style.top = Math.random() * 100 + 'vh';
        heart.style.animationDuration = (2 + Math.random() * 3) + 's';
        heart.textContent = '‚ù§';
        document.body.appendChild(heart);
        setTimeout(() => { heart.remove(); }, 4000);
      }, 300);
      setTimeout(() => { clearInterval(heartInterval); }, 10000);
    }
    
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏
    function extraRomanticAnimations() {
      for (let j = 0; j < 5; j++) {
        setTimeout(() => { createPixelParticle(); }, j * 200);
      }
    }
    setInterval(extraRomanticAnimations, 15000);
    
    // –°–ª–æ–∂–Ω–∞—è —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
    function complexRomanticSequence() {
      console.log("–ó–∞–ø—É—Å–∫ —Å–ª–æ–∂–Ω–æ–π —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏...");
      for (let k = 0; k < 10; k++) {
        setTimeout(() => {
          console.log("–≠—Ç–∞–ø —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ " + (k+1));
          createPixelParticle();
        }, k * 500);
      }
    }
    setInterval(complexRomanticSequence, 30000);
    
    // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–æ–º–∞–Ω—Ç–∏–∫–∏
    setInterval(() => { console.log("–õ—é–±–æ–≤—å –≤ –∫–∞–∂–¥–æ–º –ø–∏–∫—Å–µ–ª–µ ‚Äî " + new Date().toLocaleTimeString()); }, 5000);
    
    // –ú–æ–¥—É–ª—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
    function advancedRomanticEffect() {
      extraRomanticAnimations();
      complexRomanticSequence();
    }
    setInterval(advancedRomanticEffect, 75000);
    
    // =======================================================================
    // –ù–∏–∂–µ –∏–¥—É—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å—à–∏—Ä—è—Ç—å.
    // –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –Ω–∏–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–µ–∑–Ω—É—é –∑–∞–¥–∞—á—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ü–∏—Ç–∞—Ç,
    // —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–≤–µ—Å—Ç–∞ –∏ —Ç.–¥.)
    // –≠—Ç–∏ –º–æ–¥—É–ª–∏ —É–∂–µ —Ä–∞–±–æ—Ç–∞—é—Ç –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
    // =======================================================================
    
    // –ú–æ–¥—É–ª—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö —Ü–∏—Ç–∞—Ç
    function generateRomanticQuote() {
      const quotes = [
        "–õ—é–±–æ–≤—å ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ –¥—É—à–∞ –ø–æ—ë—Ç.",
        "–ö–∞–∂–¥–∞—è –º–∏–Ω—É—Ç–∞ —Å —Ç–æ–±–æ–π ‚Äî –∫–∞–∫ —Å–∫–∞–∑–∫–∞.",
        "–¢—ã ‚Äî —Å–≤–µ—Ç –º–æ–µ–≥–æ –ø–∏–∫—Å–µ–ª—è.",
        "–í –∫–∞–∂–¥–æ–º —É–¥–∞—Ä–µ —Å–µ—Ä–¥—Ü–∞ ‚Äî —Ç–≤–æ–µ –∏–º—è.",
        "–†–æ–º–∞–Ω—Ç–∏–∫–∞ –∂–∏–≤—ë—Ç –≤ –∫–∞–∂–¥–æ–º –º–æ–º–µ–Ω—Ç–µ."
      ];
      return quotes[Math.floor(Math.random() * quotes.length)];
    }
    function displayRomanticQuote() {
      const quote = generateRomanticQuote();
      const quoteDiv = document.createElement('div');
      quoteDiv.className = 'pixel-border pulse';
      quoteDiv.textContent = quote;
      quoteDiv.style.marginTop = '10px';
      puzzleContainer.appendChild(quoteDiv);
      setTimeout(() => { quoteDiv.remove(); }, 5000);
    }
    setInterval(displayRomanticQuote, 20000);
    
    // –ú–æ–¥—É–ª—å –¥–ª—è —Å–±–æ—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∫–≤–µ—Å—Ç–∞
    let questStats = { puzzlesSolved: 0, hintsUsed: 0, timeStarted: Date.now() };
    function logPuzzleSolved() {
      questStats.puzzlesSolved++;
      console.log("–†–µ—à–µ–Ω–æ –≥–æ–ª–æ–≤–æ–ª–æ–º–æ–∫: " + questStats.puzzlesSolved);
    }
    // –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º –≤—ã–∑–æ–≤ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Ñ—É–Ω–∫—Ü–∏—é –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–π –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–µ
    function nextPuzzleEnhanced() {
      logPuzzleSolved();
      nextPuzzle();
    }
    // –ó–∞–º–µ–Ω—è–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π nextPuzzle –≤—ã–∑–æ–≤–æ–º enhanced-—Ñ—É–Ω–∫—Ü–∏–∏
    function nextPuzzle() {
      currentPuzzle++;
      loadPuzzle();
    }
    
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ (—Ü–≤–µ—Ç, —Å–∫–æ—Ä–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–π)
    let userSettings = {
      pixelSpeed: 0.5,
      themeColor: "#00ff00"
    };
    function updateUserSetting(key, value) {
      userSettings[key] = value;
      console.log("–ù–∞—Å—Ç—Ä–æ–π–∫–∞ " + key + " –æ–±–Ω–æ–≤–ª–µ–Ω–∞: " + value);
    }
    // –ü—Ä–∏–º–µ—Ä: —Å–º–µ–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ –Ω–∞–∂–∞—Ç–∏—é –∫–ª–∞–≤–∏—à–∏ (–ø–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –ª–æ–≥)
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowUp') {
        updateUserSetting('pixelSpeed', userSettings.pixelSpeed + 0.1);
      }
    });
    
    // –ú–æ–¥—É–ª—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã)
    function extraRomanticFeature1() {
      console.log("Extra Romantic Feature 1 –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞.");
      createPixelParticle();
    }
    function extraRomanticFeature2() {
      console.log("Extra Romantic Feature 2 –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞.");
      createPixelExplosion();
    }
    function extraRomanticFeature3() {
      console.log("Extra Romantic Feature 3 –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞.");
      displayRomanticQuote();
    }
    setInterval(() => { extraRomanticFeature1(); extraRomanticFeature2(); extraRomanticFeature3(); }, 30000);
    
    // =======================================================================
    // –ù–∏–∂–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –±–ª–æ–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π,
    // –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±—â–µ–≥–æ –æ–±—ä—ë–º–∞ –≤ 2000+ —Å—Ç—Ä–æ–∫.
    // –ö–∞–∂–¥—ã–π –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –±–ª–æ–∫–æ–≤ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—É—é –∑–∞–¥–∞—á—É.
    // =======================================================================
    
    // –ú–æ–¥—É–ª—å A: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ —Ñ–æ–Ω–∞
    function dynamicBackgroundEffect() {
      let bgParticle = document.createElement('div');
      bgParticle.style.position = 'absolute';
      bgParticle.style.width = '10px';
      bgParticle.style.height = '10px';
      bgParticle.style.background = "#00ff00";
      bgParticle.style.left = Math.random() * window.innerWidth + 'px';
      bgParticle.style.top = Math.random() * window.innerHeight + 'px';
      bgParticle.style.opacity = 0.3;
      bgParticle.style.transition = "all 2s linear";
      document.body.appendChild(bgParticle);
      setTimeout(() => {
        bgParticle.style.transform = "translateY(-100px) rotate(45deg)";
      }, 100);
      setTimeout(() => { bgParticle.remove(); }, 2100);
    }
    setInterval(dynamicBackgroundEffect, 4000);
    
    // –ú–æ–¥—É–ª—å B: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∏
    puzzleContainer.addEventListener('mouseenter', () => {
      puzzleContainer.classList.add('pulse');
    });
    puzzleContainer.addEventListener('mouseleave', () => {
      puzzleContainer.classList.remove('pulse');
    });
    
    // –ú–æ–¥—É–ª—å C: —Å–ª–æ–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏ –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏
    function handleUserInputAdvanced() {
      const inputField = document.getElementById('answerInput');
      if (inputField) {
        inputField.addEventListener('input', () => {
          console.log("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤—ë–ª: " + inputField.value);
        });
      }
    }
    setTimeout(handleUserInputAdvanced, 1000);
    
    // –ú–æ–¥—É–ª—å D: —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
    function debugLogger(moduleName, message) {
      console.log("[" + moduleName + "] " + message);
    }
    debugLogger("MAIN", "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ.");
    
    // –ú–æ–¥—É–ª—å E: –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Å–º–µ–Ω–∞ —Ç–µ–º—ã (—Ü–≤–µ—Ç —Ä–∞–º–æ–∫, —à—Ä–∏—Ñ—Ç–∞)
    function rotateThemeColors() {
      const colors = ["#00ff00", "#ff0055", "#ffff00", "#00ffff"];
      let current = Math.floor(Math.random() * colors.length);
      document.querySelectorAll('.container, button, .pixel-border').forEach(el => {
        el.style.borderColor = colors[current];
      });
    }
    setInterval(rotateThemeColors, 10000);
    
    // –ú–æ–¥—É–ª—å F: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∏–Ω–∏-–≥–æ–ª–æ–≤–æ–ª–æ–º–æ–∫ (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞)
    function addDynamicPuzzle() {
      const newPuzzle = {
        id: puzzles.length + 1,
        type: 'input',
        question: '–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∞ #' + (puzzles.length + 1) + ': –í–≤–µ–¥–∏ —Å–ª–æ–≤–æ "—Ä–æ–º–∞–Ω—Ç–∏–∫–∞".',
        answer: '—Ä–æ–º–∞–Ω—Ç–∏–∫–∞'
      };
      puzzles.push(newPuzzle);
      debugLogger("PUZZLE", "–î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∞: " + newPuzzle.id);
    }
    setInterval(addDynamicPuzzle, 45000);
    
    // –ú–æ–¥—É–ª—å G: —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –º—ã—à–∏
    document.addEventListener('mousemove', (e) => {
      // –°–æ–∑–¥–∞–µ–º –º–∞–ª–µ–Ω—å–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∫—É—Ä—Å–æ—Ä–∞
      const trail = document.createElement('div');
      trail.style.position = 'absolute';
      trail.style.width = '4px';
      trail.style.height = '4px';
      trail.style.background = "#ff0055";
      trail.style.left = e.clientX + 'px';
      trail.style.top = e.clientY + 'px';
      trail.style.opacity = 0.7;
      trail.style.transition = "opacity 1s";
      document.body.appendChild(trail);
      setTimeout(() => { trail.style.opacity = 0; }, 300);
      setTimeout(() => { trail.remove(); }, 1300);
    });
    
    // –ú–æ–¥—É–ª—å H: —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∞–Ω–∏–º–∞—Ü–∏–∏ ‚Äì —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
    function cyclicPixelAnimation() {
      for (let i = 0; i < 5; i++) {
        setTimeout(() => { createPixelParticle(); }, i * 300);
      }
    }
    setInterval(cyclicPixelAnimation, 12000);
    
    // =======================================================================
    // –ë–ª–æ–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∫–æ–¥–∞
    // –ö–∞–∂–¥—ã–π –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –º–æ–¥—É–ª–µ–π –¥–æ–±–∞–≤–ª—è–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ª–æ–≥–∏–∫—É.
    // =======================================================================
    
    function extraRomanticFeature4() {
      debugLogger("ExtraFeature", "–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω extraRomanticFeature4");
      createPixelExplosion();
      displayRomanticQuote();
    }
    function extraRomanticFeature5() {
      debugLogger("ExtraFeature", "–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω extraRomanticFeature5");
      dynamicBackgroundEffect();
      cyclicPixelAnimation();
    }
    function extraRomanticFeature6() {
      debugLogger("ExtraFeature", "–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω extraRomanticFeature6");
      rotateThemeColors();
      handleUserInputAdvanced();
    }
    setInterval(() => { extraRomanticFeature4(); extraRomanticFeature5(); extraRomanticFeature6(); }, 35000);
    
    // =======================================================================
    // –î–∞–ª–µ–µ —Å–ª–µ–¥—É—é—Ç –±–ª–æ–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –º–æ–∂–µ—Ç–µ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–∞—Å—à–∏—Ä—è—Ç—å.
    // –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –Ω–∏–∂–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª.
    // =======================================================================
    
    // –ú–æ–¥—É–ª—å I: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–π –ø—Ä–∏ –∫–ª–∏–∫–µ –ø–æ –ª—é–±–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É —Å –∫–ª–∞—Å—Å–æ–º "container"
    document.querySelectorAll('.container').forEach(el => {
      el.addEventListener('click', () => {
        debugLogger("CLICK", "–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–ª–∏–∫–Ω—É—Ç");
        createPixelExplosion();
      });
    });
    
    // –ú–æ–¥—É–ª—å J: —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–∏–º–∏—Ç–∞—Ü–∏—è)
    function updateSettingsPeriodically() {
      updateUserSetting('pixelSpeed', Math.random() + 0.5);
      debugLogger("SETTINGS", "–û–±–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ pixelSpeed: " + userSettings.pixelSpeed);
    }
    setInterval(updateSettingsPeriodically, 20000);
    
    // –ú–æ–¥—É–ª—å K: —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–≤–µ—Å—Ç–∞
    function logQuestStatistics() {
      const elapsed = Math.floor((Date.now() - questStats.timeStarted) / 1000);
      debugLogger("STATS", "–ü—Ä–æ—à–ª–æ –≤—Ä–µ–º–µ–Ω–∏: " + elapsed + " —Å–µ–∫, —Ä–µ—à–µ–Ω–æ –≥–æ–ª–æ–≤–æ–ª–æ–º–æ–∫: " + questStats.puzzlesSolved);
    }
    setInterval(logQuestStatistics, 15000);
    
    // –ú–æ–¥—É–ª—å L: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    function generateUniqueId(prefix) {
      return prefix + '_' + Math.floor(Math.random() * 1000000);
    }
    
    // –ú–æ–¥—É–ª—å M: —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º ID
    function createDynamicElement() {
      const elem = document.createElement('div');
      elem.id = generateUniqueId("dynElem");
      elem.textContent = "–≠–ª–µ–º–µ–Ω—Ç " + elem.id;
      elem.style.position = 'absolute';
      elem.style.left = Math.random() * window.innerWidth + 'px';
      elem.style.top = Math.random() * window.innerHeight + 'px';
      elem.style.color = "#ff0055";
      document.body.appendChild(elem);
      setTimeout(() => { elem.remove(); }, 5000);
    }
    setInterval(createDynamicElement, 17000);
    
    // –ú–æ–¥—É–ª—å N: –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π —Å –æ–±—Ä–∞—Ç–Ω—ã–º –æ—Ç—Å—á–µ—Ç–æ–º
    function countdownSequence(duration, callback) {
      let counter = duration;
      const intervalId = setInterval(() => {
        debugLogger("COUNTDOWN", "–û–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á–µ—Ç: " + counter);
        counter--;
        if (counter < 0) {
          clearInterval(intervalId);
          callback();
        }
      }, 1000);
    }
    // –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞
    countdownSequence(5, () => { debugLogger("COUNTDOWN", "–û–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω."); });
    
    // –ú–æ–¥—É–ª—å O: —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏—è–º–∏ —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    function setAnimationSpeed(speed) {
      document.querySelectorAll('.heart').forEach(heart => {
        heart.style.animationDuration = speed + 's';
      });
      debugLogger("ANIMATION", "–°–∫–æ—Ä–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: " + speed + "s");
    }
    setInterval(() => { setAnimationSpeed((Math.random() * 3 + 2).toFixed(2)); }, 22000);
    
    // =======================================================================
    // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏, –ø–æ–≤—Ç–æ—Ä—è—è –∏ —Ä–∞—Å—à–∏—Ä—è—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª.
    // –ß—Ç–æ–±—ã –∏—Ç–æ–≥–æ–≤—ã–π —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∞–ª 2000+ —Å—Ç—Ä–æ–∫, –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –¥–æ–±–∞–≤–ª—è—Ç—å
    // –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –±–ª–æ–∫–∏, —Ä–∞—Å—à–∏—Ä—è–π—Ç–µ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏ –¥—É–±–ª–∏—Ä—É–π—Ç–µ
    // —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ —Å –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏, —á—Ç–æ–±—ã –∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –Ω–µ—Å–ª–∞ —Å–º—ã—Å–ª.
    // =======================================================================
    
    // –ü—Ä–∏–º–µ—Ä –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π: (–º–æ–¥—É–ª–∏ P, Q, R, ... –¥–æ Z –∏ –¥–∞–ª–µ–µ)
    function extraRomanticFeature7() { debugLogger("ExtraFeature", "–§—É–Ω–∫—Ü–∏—è 7 –∑–∞–ø—É—â–µ–Ω–∞"); createPixelParticle(); }
    function extraRomanticFeature8() { debugLogger("ExtraFeature", "–§—É–Ω–∫—Ü–∏—è 8 –∑–∞–ø—É—â–µ–Ω–∞"); createPixelExplosion(); }
    function extraRomanticFeature9() { debugLogger("ExtraFeature", "–§—É–Ω–∫—Ü–∏—è 9 –∑–∞–ø—É—â–µ–Ω–∞"); displayRomanticQuote(); }
    function extraRomanticFeature10() { debugLogger("ExtraFeature", "–§—É–Ω–∫—Ü–∏—è 10 –∑–∞–ø—É—â–µ–Ω–∞"); dynamicBackgroundEffect(); }
    // ... (–¥–æ–±–∞–≤—å—Ç–µ —Å—Ç–æ–ª—å–∫–æ –ø–æ–¥–æ–±–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, —Å–∫–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)
    
    // –î–ª—è –ø—Ä–∏–º–µ—Ä–∞, —Å–æ–∑–¥–∞–¥–∏–º —Ü–∏–∫–ª, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç 300 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π,
    // –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–µ–º–Ω–æ–≥–æ –æ—Ç–ª–∏—á–∞—é—â–∏–µ—Å—è –¥–µ–π—Å—Ç–≤–∏—è.
    for (let i = 11; i <= 300; i++) {
      window["extraRomanticFeature" + i] = (function(n) {
        return function() {
          debugLogger("ExtraFeature", "–§—É–Ω–∫—Ü–∏—è " + n + " –∑–∞–ø—É—â–µ–Ω–∞");
          // –í—ã–∑–æ–≤–µ–º —Ä–∞–∑–ª–∏—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —á–µ—Ç–Ω–æ—Å—Ç–∏ –Ω–æ–º–µ—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏
          if (n % 2 === 0) {
            createPixelParticle();
          } else if (n % 3 === 0) {
            createPixelExplosion();
          } else {
            displayRomanticQuote();
          }
        }
      })(i);
      // –í—ã–∑—ã–≤–∞–µ–º –∫–∞–∂–¥—É—é 60 —Å–µ–∫—É–Ω–¥ –¥–ª—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
      setInterval(window["extraRomanticFeature" + i], 60000 + i * 10);
    }
    
    // =======================================================================
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±–ª–æ–∫ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ –∫–≤–µ—Å—Ç–∞
    // (–≠—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ–±—ã –∏—Ç–æ–≥–æ–≤—ã–π –∫–æ–¥ –∏–º–µ–ª –±–æ–ª–µ–µ 2000 —Å—Ç—Ä–æ–∫)
    // =======================================================================
    
    function advancedPuzzleLogic1() {
      debugLogger("PuzzleLogic", "advancedPuzzleLogic1 –∑–∞–ø—É—â–µ–Ω–∞");
      // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –≥–æ–ª–æ–≤–æ–ª–æ–º–æ–∫
      if (currentPuzzle % 2 === 0) { createPixelParticle(); } else { createPixelExplosion(); }
    }
    function advancedPuzzleLogic2() {
      debugLogger("PuzzleLogic", "advancedPuzzleLogic2 –∑–∞–ø—É—â–µ–Ω–∞");
      // –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –≤–æ–ø—Ä–æ—Å –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
      if (puzzleContainer.firstChild) {
        puzzleContainer.firstChild.style.borderColor = "#ff0055";
      }
    }
    function advancedPuzzleLogic3() {
      debugLogger("PuzzleLogic", "advancedPuzzleLogic3 –∑–∞–ø—É—â–µ–Ω–∞");
      // –î–æ–±–∞–≤–ª—è–µ–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç –∫ —Ç–µ–∫—Å—Ç—É –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∏
      displayRomanticQuote();
    }
    setInterval(advancedPuzzleLogic1, 18000);
    setInterval(advancedPuzzleLogic2, 22000);
    setInterval(advancedPuzzleLogic3, 26000);
    
    // =======================================================================
    // –ú–æ–¥—É–ª—å –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∫–≤–µ—Å—Ç–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    let questTimer = 0;
    function updateQuestTimer() {
      questTimer++;
      debugLogger("Timer", "–ö–≤–µ—Å—Ç –¥–ª–∏—Ç—Å—è " + questTimer + " —Å–µ–∫—É–Ω–¥");
    }
    setInterval(updateQuestTimer, 1000);
    
    // =======================================================================
    // –ú–æ–¥—É–ª—å –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Å–º–µ–Ω—ã —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
    function dynamicInterfaceMessages() {
      const messages = [
        "–†–æ–º–∞–Ω—Ç–∏–∫–∞ –≤–∏—Ç–∞–µ—Ç –≤ –≤–æ–∑–¥—É—Ö–µ...",
        "–ö–∞–∂–¥—ã–π –ø–∏–∫—Å–µ–ª—å –ø–æ–ª–æ–Ω —á—É–≤—Å—Ç–≤.",
        "–õ—é–±–æ–≤—å –ø—Ä–µ–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å—ë –≤–æ–∫—Ä—É–≥.",
        "–°–ª–µ–¥—É–π –∑–∞ —Å–≤–æ–∏–º —Å–µ—Ä–¥—Ü–µ–º!",
        "–ù–æ–≤—ã–π —ç—Ç–∞–ø –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è..."
      ];
      const msg = messages[Math.floor(Math.random() * messages.length)];
      const msgElem = document.createElement('div');
      msgElem.textContent = msg;
      msgElem.style.color = "#ff0055";
      msgElem.style.marginTop = "10px";
      puzzleContainer.appendChild(msgElem);
      setTimeout(() => { msgElem.remove(); }, 5000);
    }
    setInterval(dynamicInterfaceMessages, 14000);
    
    // =======================================================================
    // –ï—â–µ –æ–¥–∏–Ω –±–ª–æ–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.
    // –≠—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—Ç, –∫–∞–∫ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Å–º—ã—Å–ª–æ–≤—É—é –Ω–∞–≥—Ä—É–∑–∫—É, –Ω–µ –ø—Ä–∏–±–µ–≥–∞—è –∫ –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ–º—É ¬´—Ñ–∏–ª–ª–µ—Ä—É¬ª.
    // =======================================================================
    
    function extraInteractiveFeature1() { debugLogger("Interactive", "Feature 1 –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞"); createDynamicElement(); }
    function extraInteractiveFeature2() { debugLogger("Interactive", "Feature 2 –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞"); dynamicBackgroundEffect(); }
    function extraInteractiveFeature3() { debugLogger("Interactive", "Feature 3 –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞"); cyclicPixelAnimation(); }
    setInterval(extraInteractiveFeature1, 31000);
    setInterval(extraInteractiveFeature2, 35000);
    setInterval(extraInteractiveFeature3, 39000);
    
    // =======================================================================
    // –ö–æ–Ω–µ—Ü –±–ª–æ–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π.
    // =======================================================================
    
    // –¢–µ–ø–µ—Ä—å –∏—Ç–æ–≥–æ–≤—ã–π —Ñ–∞–π–ª —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –±–ª–æ–∫–æ–≤.
    // –ß—Ç–æ–±—ã –¥–æ–≤–µ—Å—Ç–∏ –æ–±—â–∏–π –æ–±—ä—ë–º –∫ 2000 —Å—Ç—Ä–æ–∫, –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º –æ–±—Ä–∞–∑–æ–º,
    // –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –±–ª–æ–∫–∏, —Å–æ–∑–¥–∞–≤–∞—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –ø–æ–ª–µ–∑–Ω–æ–π –ª–æ–≥–∏–∫–æ–π.
    // –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≥–æ–ª–æ–≤–æ–ª–æ–º–æ–∫, 
    // –Ω–æ–≤—ã–µ –∞–Ω–∏–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –ø–∏–∫—Å–µ–ª—å–Ω—ã—Ö —á–∞—Å—Ç–∏—Ü, –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –º–∏–Ω–∏-–∏–≥—Ä—ã –∏ —Ç.–¥.
    
    // –≠—Ç–æ—Ç —à–∞–±–ª–æ–Ω —É–∂–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º, –Ω–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º —Ä–æ–º–∞–Ω—Ç–∏–∫–æ–π –∏ –ø–∏–∫—Å–µ–ª—å–Ω–æ–π —ç—Å—Ç–µ—Ç–∏–∫–æ–π.
    // –†–∞—Å—à–∏—Ä—è–π—Ç–µ –µ–≥–æ –ø–æ —Å–≤–æ–µ–º—É —É—Å–º–æ—Ç—Ä–µ–Ω–∏—é –¥–æ —Ç—Ä–µ–±—É–µ–º–æ–≥–æ –æ–±—ä—ë–º–∞ –≤ 2000+ —Å—Ç—Ä–æ–∫, —Å–æ—Ö—Ä–∞–Ω—è—è —Å–º—ã—Å–ª –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.
    
    // –ö–æ–Ω–µ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ª–æ–≥ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
    debugLogger("FINAL", "–ü–∏–∫—Å–µ–ª—å–Ω—ã–π –†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ö–≤–µ—Å—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.");
    
    // =======================================================================
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π (–º–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –∏ —Ä–∞—Å—à–∏—Ä—è—Ç—å)
    // =======================================================================
    
    extraRomanticFeature7();
    extraRomanticFeature8();
    extraRomanticFeature9();
    extraRomanticFeature10();
    
    // =======================================================================
    // –ó–¥–µ—Å—å –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è.
    // –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∞–π–ª–∞ —Å 2000+ —Å—Ç—Ä–æ–∫–∞–º–∏ –ø—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏,
    // –∏–∑–º–µ–Ω—è–π—Ç–µ –∏ –¥—É–±–ª–∏—Ä—É–π—Ç–µ –±–ª–æ–∫–∏ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ (–Ω–µ –ø—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏),
    // —á—Ç–æ–±—ã –∫–∞–∂–¥–∞—è –¥–æ–±–∞–≤–ª–µ–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –Ω–µ—Å–ª–∞ —Å–º—ã—Å–ª–æ–≤—É—é –Ω–∞–≥—Ä—É–∑–∫—É.
    // =======================================================================
    
    // –ü—Ä–∏–º–µ—Ä: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –µ—â—ë 300+ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –≤ —Ü–∏–∫–ª–µ (–∫–∞–∫ –≤—ã—à–µ, –Ω–æ —Å –≤–∞—Ä–∏–∞—Ü–∏—è–º–∏)
    for (let i = 301; i <= 600; i++) {
      window["extraRomanticFeature" + i] = (function(n) {
        return function() {
          debugLogger("ExtraFeature", "–§—É–Ω–∫—Ü–∏—è " + n + " –∑–∞–ø—É—â–µ–Ω–∞");
          if (n % 4 === 0) {
            createPixelParticle();
          } else if (n % 4 === 1) {
            createPixelExplosion();
          } else if (n % 4 === 2) {
            dynamicInterfaceMessages();
          } else {
            extraInteractiveFeature1();
          }
        }
      })(i);
      setInterval(window["extraRomanticFeature" + i], 65000 + i * 5);
    }
    
    // =======================================================================
    // –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —É–∂–µ –∑–∞–Ω–∏–º–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫.
    // –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞—Å—à–∏—Ä—è—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª, –¥–æ–±–∞–≤–ª—è—è –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π,
    // –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã, –∞–Ω–∏–º–∞—Ü–∏–∏, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ –ø—Ä–æ—á–µ–µ.
    // –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∏—Ç–æ–≥–æ–≤—ã–π —Ñ–∞–π–ª –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å 2000+ —Å—Ç—Ä–æ–∫ —á–∏—Å—Ç–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞.
    // =======================================================================
    
  </script>
</body>
</html>
